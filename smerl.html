<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module smerl</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/github-dark-dimmed.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/languages/erlang.min.js"></script>
<script>
  hljs.highlightAll();
</script>

<body class="src">
<a name="top"></a>
<hr>

<h1>Module smerl</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Simple Metaprogramming for Erlang.
<p>Copyright Â© 2006-2007, 2016 AUTHORS
  
   Smerl is an Erlang library
   that simplifies the creation and manipulation of Erlang modules in
   runtime.
  
   You don't need to know Smerl in order to use ErlyWeb; Smerl
   is included in ErlyWeb because ErlyWeb uses it internally.
  
   Smerl uses Erlang's capabilities for hot code swapping and
   abstract syntax tree transformations to do its magic. Smerl is inspired by
   the rdbms_codegen.erl module in the RDBMS application written by
   Ulf Wiger. RDBMS is part of Jungerl ([http://jungerl.sf.net]).
  
   Here's a quick example illustrating how to use Smerl:
   ```
   test_smerl() -&gt;
     M1 = smerl:new(foo),
     {ok, M2} = smerl:add_func(M1, "bar() -&gt; 1 + 1."),
     smerl:compile(M2),
     foo:bar(),   % returns 2``
     smerl:has_func(M2, bar, 0). % returns true
   '''
  
   New functions can be expressed either as strings of Erlang code
   or as abstract forms. For more information, read the Abstract Format
   section in the ERTS User's guide
    ([http://erlang.org/doc/doc-5.5/erts-5.5/doc/html/absform.html#4]).
  
   Using the abstract format, the 3rd line of the above example
   would be written as
    ```
      {ok,M2} = smerl:add_func(M1, {function,1,bar,0,
                               [{clause,1,[],[],
                                [{op,1,'+',{integer,1,1},{integer,1,1}}]}]).
    '''
  
    &lt;p&gt;The abstact format may look more verbose in this example, but
    it's also easier to manipulate in code.&lt;/p&gt;</p>

<p><b>Authors:</b> Yariv Sadan.</p>

<h2><a href="#" name="description">Description</a></h2>Simple Metaprogramming for Erlang
<h2><a href="#" name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-args">args()</a></h3>
<p><pre><code class="language-erlang">args() = term() | [term()]</code></pre></p>


<h3 class="typedecl"><a name="type-error_t">error_t()</a></h3>
<p><pre><code class="language-erlang">error_t(Error) = ok | {error, Error}</code></pre></p>


<h3 class="typedecl"><a name="type-export">export()</a></h3>
<p><pre><code class="language-erlang">export() = {Function :: atom(), Arity :: arity()}</code></pre></p>


<h3 class="typedecl"><a name="type-exports">exports()</a></h3>
<p><pre><code class="language-erlang">exports() = [<a href="#type-export">export()</a>]</code></pre></p>
<p>  A list of <code><a href="#type-export">export()</a></code>s.</p>

<h3 class="typedecl"><a name="type-func_form">func_form()</a></h3>
<p><pre><code class="language-erlang">func_form() = <a href="http://www.erlang.org/doc/man/stdlib/doc/erl_parse.html#type-abstract_form">erl_parse:abstract_form()</a></code></pre></p>
<p>  The abstract form for the function, as described
  in the ERTS Users' manual.</p>

<h3 class="typedecl"><a name="type-func_forms">func_forms()</a></h3>
<p><pre><code class="language-erlang">func_forms() = [<a href="#type-func_form">func_form()</a>]</code></pre></p>
<p>  A list of <code><a href="#type-func_form">func_form()</a></code>s.</p>

<h3 class="typedecl"><a name="type-meta_mod">meta_mod()</a></h3>
<p><pre><code class="language-erlang">meta_mod() = 
    #meta_mod{module = module(),
              file = undefined | <a href="http://www.erlang.org/doc/man/kernel/doc/file.html#type-filename">file:filename()</a>,
              exports = <a href="#type-exports">exports()</a>,
              forms = <a href="#type-func_forms">func_forms()</a>,
              export_all = boolean()}</code></pre></p>
<p>  A data structure holding the abstract representation
  for a module.</p>

<h3 class="typedecl"><a name="type-ok_t">ok_t()</a></h3>
<p><pre><code class="language-erlang">ok_t(Value) = {ok, Value} | error</code></pre></p>


<h3 class="typedecl"><a name="type-result">result()</a></h3>
<p><pre><code class="language-erlang">result(Value, Error) = {ok, Value} | {error, Error}</code></pre></p>


<h3 class="typedecl"><a name="type-result">result()</a></h3>
<p><pre><code class="language-erlang">result(Value) = <a href="#type-result">result</a>(Value, term())</code></pre></p>


<h2><a href="#" name="index">Function Index</a></h2>
<table class="tab" width="100%" class="tab" summary="function index"><tr class="tab"><td class="tab"><a href="#add_func-2">add_func/2</a></td><td class="tab">Add a new exported function to <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#add_func-3">add_func/3</a></td><td class="tab">Add <code>Function</code> to <code>MetaMod</code> and return the new <code><a href="#type-meta_mod">meta_mod()</a></code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#compile-1">compile/1</a></td><td class="tab">Compile <code>MetaMod</code> and load the resulting BEAM into the emulator.</td></tr>
<tr class="tab"><td class="tab"><a href="#compile-2">compile/2</a></td><td class="tab">Compile <code>MetaMod</code> and load the resulting BEAM into the emulator.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry-2">curry/2</a></td><td class="tab">Get the curried form for <code>Form</code> with <code>Args</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry-4">curry/4</a></td><td class="tab">Curry <code>Module</code>:<code>Function</code>/<code>Arity</code> with the given <code>Args</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry-5">curry/5</a></td><td class="tab">Curry <code>Module</code>:<code>Function</code>/<code>Arity</code>with the given <code>Args</code>,
  renaming it to <code>NewName</code> and return the renamed form.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_add-3">curry_add/3</a></td><td class="tab">Add <code>Form</code> curried with <code>Args</code> to <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_add-4">curry_add/4</a></td><td class="tab">Add <code>Function</code>/<code>Arity</code> curried with <code>Args</code> to <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_add-5">curry_add/5</a></td><td class="tab">Curry <code>MetaMod</code>:<code>Function</code>/<code>Arity</code> and add it to <code>MetaMod</code> as <code>NewName</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_add-6">curry_add/6</a></td><td class="tab">Curry <code>Module</code>:<code>Function</code>/<code>Arity</code> and add it to <code>MetaMod</code> as <code>NewName</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_replace-3">curry_replace/3</a></td><td class="tab">Replace the function represented by <code>Form</code> in <code>MetaMod</code>
  with its curried form.</td></tr>
<tr class="tab"><td class="tab"><a href="#curry_replace-4">curry_replace/4</a></td><td class="tab">Replace <code>Function</code>/<code>Arity</code> in <code>MetaMod</code> with its curried form.</td></tr>
<tr class="tab"><td class="tab"><a href="#embed_all-2">embed_all/2</a></td><td class="tab">Apply <a docgen-rel="seemfa" docgen-href="#embed_args/2" href="#embed_args-2"><code>embed_args/2</code></a> with <code>Values</code> to all forms in <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#embed_args-2">embed_args/2</a></td><td class="tab">Replace the arguments of the function represented by <code>Form</code>,
  where the argument's <code>Name</code> matches an element from <code>Vals</code>
  with the corresponding <code>Value</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#embed_args-4">embed_args/4</a></td><td class="tab">Equivalent to <a href="#embed_args-5"><tt>embed_args(MetaMod, Name, Arity, Values, Name)</tt></a>.
</td></tr>
<tr class="tab"><td class="tab"><a href="#embed_args-5">embed_args/5</a></td><td class="tab">Apply <a docgen-rel="seemfa" docgen-href="#embed_args/2" href="#embed_args-2"><code>embed_args/2</code></a> to <code>MetaMod</code>:<code>Function</code>/<code>Arity</code> and
  add the resulting function to <code>MetMod</code>, after renaming it to <code>NewName</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#extend-2">extend/2</a></td><td class="tab">Add aliases for <code>Parent</code>'s functions missing from <code>Child</code> to <code>Child</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#extend-3">extend/3</a></td><td class="tab">Similar to <a docgen-rel="seemfa" docgen-href="#extend/2" href="#extend-2"><code>extend/2</code></a>, with the addition of <code>ArityDiff</code>, which
  indicates the difference in arities <em>Smerl</em> should use when figuring
  out which functions to generate based on the modules' exports.</td></tr>
<tr class="tab"><td class="tab"><a href="#extend-4">extend/4</a></td><td class="tab"></td></tr>
<tr class="tab"><td class="tab"><a href="#for_file-1">for_file/1</a></td><td class="tab">Equivalent to <a href="#for_file-2"><tt>for_file(SrcFilePath, [])</tt></a>.
</td></tr>
<tr class="tab"><td class="tab"><a href="#for_file-2">for_file/2</a></td><td class="tab">Equivalent to <a href="#for_file-3"><tt>for_file(SrcFilePath, IncludePaths, [])</tt></a>.
</td></tr>
<tr class="tab"><td class="tab"><a href="#for_file-3">for_file/3</a></td><td class="tab">Create a meta_mod for a module from its source file.</td></tr>
<tr class="tab"><td class="tab"><a href="#for_module-1">for_module/1</a></td><td class="tab">Equivalent to <a href="#for_module-2"><tt>for_module(ModuleName, [])</tt></a>.
</td></tr>
<tr class="tab"><td class="tab"><a href="#for_module-2">for_module/2</a></td><td class="tab">Equivalent to <a href="#for_module-3"><tt>for_module(ModuleName, IncludePaths, [])</tt></a>.
</td></tr>
<tr class="tab"><td class="tab"><a href="#for_module-3">for_module/3</a></td><td class="tab">Create a meta_mod tuple for an existing module.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_attribute-2">get_attribute/2</a></td><td class="tab">Get the value of <code>MetaMod</code>'s <code>Key</code> attribute.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_export_all-1">get_export_all/1</a></td><td class="tab">Get the <code>export_all</code> value for <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_exports-1">get_exports/1</a></td><td class="tab">Return the list of exports in the meta_mod.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_forms-1">get_forms/1</a></td><td class="tab">Return the list of function forms in the meta_mod.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_func-3">get_func/3</a></td><td class="tab">Attempt to get the <code><a href="#type-func_form">func_form()</a></code> for <code>MetaMod</code>:<code>Function</code>/<code>Arity</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#get_module-1">get_module/1</a></td><td class="tab">Return the module name for the meta_mod.</td></tr>
<tr class="tab"><td class="tab"><a href="#has_func-3">has_func/3</a></td><td class="tab">Check whether <code>MetaMod</code> has a function <code>Function</code>/<code>Arity</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#new-1">new/1</a></td><td class="tab">Create a new meta_mod for a module with the given name.</td></tr>
<tr class="tab"><td class="tab"><a href="#remove_export-3">remove_export/3</a></td><td class="tab">Remove an export <code>{Function, Arity}</code>
  from the list of <code>exports</code> in <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#remove_func-3">remove_func/3</a></td><td class="tab">Try to remove <code>Function</code> from <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#rename-2">rename/2</a></td><td class="tab">Change the name of the function represented by <code>Form</code> to <code>NewName</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#replace_func-2">replace_func/2</a></td><td class="tab">Replace an existing function with a new one.</td></tr>
<tr class="tab"><td class="tab"><a href="#set_export_all-2">set_export_all/2</a></td><td class="tab">Set the <code>export_all</code> value for <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#set_exports-2">set_exports/2</a></td><td class="tab">Set the <code>MetaMod</code>'s export list to <code>Exports</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#set_forms-2">set_forms/2</a></td><td class="tab"></td></tr>
<tr class="tab"><td class="tab"><a href="#set_module-2">set_module/2</a></td><td class="tab">Set the meta_mod's module name.</td></tr>
<tr class="tab"><td class="tab"><a href="#to_src-1">to_src/1</a></td><td class="tab">Return the pretty-printed source code for <code>MetaMod</code>.</td></tr>
<tr class="tab"><td class="tab"><a href="#to_src-2">to_src/2</a></td><td class="tab">Equivalent to <a href="file.html#write_file-2"><tt>file:write_file(Filename, to_src(MetaMod))</tt></a>.
</td></tr>
</table>

<h2><a href="#" name="functions">Function Details</a></h2>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="add_func-2">add_func/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">add_func(MetaMod, Form) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>, parse_error)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Form = <a href="#type-func_form">func_form()</a> | string()</code></pre></li></ul></p>
<p> </p>
</div><p>Equivalent to <a href="#add_func-3"><tt>add_func(MetaMod, Form, true)</tt></a>.</p>
<p>Add a new exported function to <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="add_func-3">add_func/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">add_func(MetaMod, Func, Export) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>, parse_error)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Func = <a href="#type-func_form">func_form()</a> | string()</code></pre></li><li><pre><code class="language-erlang">Export = boolean()</code></pre></li></ul></p>
<p> </p>
</div><p>Add <code>Function</code> to <code>MetaMod</code> and return the new <code><a href="#type-meta_mod">meta_mod()</a></code>. If
  <code>Export</code> is <code>true</code>, add <code>Function</code> to <code>MetaMod</code>'s <code>exports</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="compile-1">compile/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">compile(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; <a href="#type-error_t">error_t</a>(term())</code></pre></p>
<p> </p>
</div><p>Equivalent to <a href="#compile-2"><tt>compile(MetaMod, [])</tt></a>.</p>
<p>Compile <code>MetaMod</code> and load the resulting BEAM into the emulator.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="compile-2">compile/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">compile(MetaMod, Options) -&gt; <a href="#type-error_t">error_t</a>(term())</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Options = [<a href="http://www.erlang.org/doc/man/stdlib/doc/proplists.html#type-property">proplists:property()</a>]</code></pre></li></ul></p>
<p> </p>
</div><p>Equivalent to <a href="#compile-2"><tt>compile(MetaMod,
        [report_errprs, report_warnings, return_errors])</tt></a>.</p>
<p>Compile <code>MetaMod</code> and load the resulting BEAM into the emulator.
  <code>Options</code> is a list of options as described in the <code>compile</code> module in the
  Erlang documentation.
  If an <code>outdir</code> is provided, write the <code>.beam</code> file to it.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry-2">curry/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry(Form :: <a href="#type-func_form">func_form()</a>, Args :: <a href="#type-args">args()</a>) -&gt; <a href="#type-result">result</a>(<a href="#type-func_form">func_form()</a>)</code></pre></p>
<p> </p>
</div><p>Get the curried form for <code>Form</code> with <code>Args</code>.
  Here, "currying" involves replacing one or more of the function's leading
  arguments with predefined values.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry-4">curry/4</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry(Module, Function, Arity, Args) -&gt; <a href="#type-result">result</a>(<a href="#type-func_form">func_form()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Module = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Curry <code>Module</code>:<code>Function</code>/<code>Arity</code> with the given <code>Args</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry-5">curry/5</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry(Module, Function, Arity, Args, NewName) -&gt;
         <a href="#type-result">result</a>(<a href="#type-func_form">func_form()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Module = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li><li><pre><code class="language-erlang">NewName = atom()</code></pre></li></ul></p>
<p> </p>
</div><p>Curry <code>Module</code>:<code>Function</code>/<code>Arity</code>with the given <code>Args</code>,
  renaming it to <code>NewName</code> and return the renamed form.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_add-3">curry_add/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_add(MetaMod, Form, Args) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Form = <a href="#type-func_form">func_form()</a></code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Add <code>Form</code> curried with <code>Args</code> to <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_add-4">curry_add/4</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_add(MetaMod, Function, Arity, Args) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Add <code>Function</code>/<code>Arity</code> curried with <code>Args</code> to <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_add-5">curry_add/5</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_add(MetaMod, Function, Arity, Args, NewName) -&gt; Result</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li><li><pre><code class="language-erlang">NewName = atom()</code></pre></li><li><pre><code class="language-erlang">Result = <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>, parse_error)</code></pre></li></ul></p>
<p> </p>
</div><p>Curry <code>MetaMod</code>:<code>Function</code>/<code>Arity</code> and add it to <code>MetaMod</code> as <code>NewName</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_add-6">curry_add/6</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_add(MetaMod, Module, Function, Arity, Args, NewName) -&gt;
             Result</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Module = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li><li><pre><code class="language-erlang">NewName = atom()</code></pre></li><li><pre><code class="language-erlang">Result = <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre></li></ul></p>
<p> </p>
</div><p>Curry <code>Module</code>:<code>Function</code>/<code>Arity</code> and add it to <code>MetaMod</code> as <code>NewName</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_replace-3">curry_replace/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_replace(MetaMod, Form, Args) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Form = <a href="#type-func_form">func_form()</a></code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Replace the function represented by <code>Form</code> in <code>MetaMod</code>
  with its curried form.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="curry_replace-4">curry_replace/4</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">curry_replace(MetaMod, Function, Arity, Args) -&gt;
                 <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Args = <a href="#type-args">args()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Replace <code>Function</code>/<code>Arity</code> in <code>MetaMod</code> with its curried form.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="embed_all-2">embed_all/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">embed_all(MetaMod, Values) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Values = [{Name :: atom(), Value :: term()}]</code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Apply <a docgen-rel="seemfa" docgen-href="#embed_args/2" href="#embed_args-2"><code>embed_args/2</code></a> with <code>Values</code> to all forms in <code>MetaMod</code>.
  <code>exports</code> for functions whose arities change are preserved.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="embed_args-2">embed_args/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">embed_args(Form, Vals) -&gt; NewForm</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Form = <a href="#type-func_form">func_form()</a></code></pre></li><li><pre><code class="language-erlang">Vals = [{Name :: atom(), Value :: term()}]</code></pre></li><li><pre><code class="language-erlang">NewForm = <a href="#type-func_form">func_form()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Replace the arguments of the function represented by <code>Form</code>,
  where the argument's <code>Name</code> matches an element from <code>Vals</code>
  with the corresponding <code>Value</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="embed_args-4">embed_args/4</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">embed_args(MetaMod, Function, Arity, Values) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Values = <a href="http://www.erlang.org/doc/man/stdlib/doc/proplists.html#type-proplist">proplists:proplist()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Equivalent to <a href="#embed_args-5"><tt>embed_args(MetaMod, Name, Arity, Values, Name)</tt></a>.</p>


<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="embed_args-5">embed_args/5</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">embed_args(MetaMod, Function, Arity, Values, NewName) -&gt; Result</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">Values = <a href="http://www.erlang.org/doc/man/stdlib/doc/proplists.html#type-proplist">proplists:proplist()</a></code></pre></li><li><pre><code class="language-erlang">NewName = atom()</code></pre></li><li><pre><code class="language-erlang">Result = <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre></li></ul></p>
<p> </p>
</div><p>Apply <a docgen-rel="seemfa" docgen-href="#embed_args/2" href="#embed_args-2"><code>embed_args/2</code></a> to <code>MetaMod</code>:<code>Function</code>/<code>Arity</code> and
  add the resulting function to <code>MetMod</code>, after renaming it to <code>NewName</code>.</p>
<p><b>See also:</b> <a href="#rename-2">rename/2</a>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="extend-2">extend/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">extend(Parent, Child) -&gt; NewChildMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Parent = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Child = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">NewChildMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Add aliases for <code>Parent</code>'s functions missing from <code>Child</code> to <code>Child</code>.
  The new functions in <code>Child</code> are shallow, i.e. they have the name and arity
  of the corresponding functions in <code>Parent</code>, but instead of implementing their
  logic they call the <code>Parent</code> functions.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="extend-3">extend/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">extend(Parent, Child, ArityDiff) -&gt; NewChildMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Parent = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Child = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">ArityDiff = non_neg_integer()</code></pre></li><li><pre><code class="language-erlang">NewChildMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Similar to <a docgen-rel="seemfa" docgen-href="#extend/2" href="#extend-2"><code>extend/2</code></a>, with the addition of <code>ArityDiff</code>, which
  indicates the difference in arities <em>Smerl</em> should use when figuring
  out which functions to generate based on the modules' exports. This is
  sometimes useful when calling <a docgen-rel="seemfa" docgen-href="#extend/3" href="#extend-3"><code>extend/3</code></a> followed by <a docgen-rel="seemfa" docgen-href="#embed_all/2" href="#embed_all-2"><code>embed_all/2</code></a>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="extend-4">extend/4</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">extend(Parent, Child, ArityDiff, Options) -&gt; NewChildMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">Parent = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Child = module() | <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">ArityDiff = non_neg_integer()</code></pre></li><li><pre><code class="language-erlang">Options = [<a href="http://www.erlang.org/doc/man/stdlib/doc/proplists.html#type-property">proplists:property()</a>]</code></pre></li><li><pre><code class="language-erlang">NewChildMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_file-1">for_file/1</a></h3>
<div class="spec">
<p><tt>for_file(SrcFilePath) -&gt; any()</tt></p>
<p> </p>
</div><p>Equivalent to <a href="#for_file-2"><tt>for_file(SrcFilePath, [])</tt></a>.</p>


<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_file-2">for_file/2</a></h3>
<div class="spec">
<p><tt>for_file(SrcFilePath, IncludePaths) -&gt; any()</tt></p>
<p> </p>
</div><p>Equivalent to <a href="#for_file-3"><tt>for_file(SrcFilePath, IncludePaths, [])</tt></a>.</p>


<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_file-3">for_file/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">for_file(SrcFilePath, IncludePaths, Macros) -&gt; Result</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">SrcFilePath = <a href="http://www.erlang.org/doc/man/kernel/doc/file.html#type-filename">file:filename()</a></code></pre></li><li><pre><code class="language-erlang">IncludePaths = [<a href="http://www.erlang.org/doc/man/kernel/doc/file.html#type-filename">file:filename()</a>]</code></pre></li><li><pre><code class="language-erlang">Macros = [{module(), atom()}]</code></pre></li><li><pre><code class="language-erlang">Result = <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>, invalid_module)</code></pre></li></ul></p>
<p> </p>
</div><p>Create a meta_mod for a module from its source file.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_module-1">for_module/1</a></h3>
<div class="spec">
<p><tt>for_module(ModuleName) -&gt; any()</tt></p>
<p> </p>
</div><p>Equivalent to <a href="#for_module-2"><tt>for_module(ModuleName, [])</tt></a>.</p>


<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_module-2">for_module/2</a></h3>
<div class="spec">
<p><tt>for_module(ModuleName, IncludePaths) -&gt; any()</tt></p>
<p> </p>
</div><p>Equivalent to <a href="#for_module-3"><tt>for_module(ModuleName, IncludePaths, [])</tt></a>.</p>


<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="for_module-3">for_module/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">for_module(ModuleName, IncludePaths, Macros) -&gt; <a href="#type-result">result</a>(meta_mod)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">ModuleName = atom() | string()</code></pre></li><li><pre><code class="language-erlang">IncludePaths = [string()]</code></pre></li><li><pre><code class="language-erlang">Macros = [{atom(), term()}]</code></pre></li></ul></p>
<p> </p>
</div><p><p>Create a meta_mod tuple for an existing module. If ModuleName is a
  string, it is interpreted as a file name (this is the same as calling
  <a docgen-rel="seemfa" docgen-href="#for_file/3" href="#for_file-3"><code>for_file/3</code></a>). If ModuleName is an atom, <em>Smerl</em> attempts to  
find its abstract represtation either from its source file or from  
its .beam file directly (if it has been compiled with debug_info).  
If the abstract representation can't be found, this function returns  
an error.</p>
 
  The <code>IncludePaths</code> argument is used when <code>ModuleName</code> is a file name.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_attribute-2">get_attribute/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_attribute(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>, Key :: atom()) -&gt;
                 <a href="#type-result">result</a>(term())</code></pre></p>
<p> </p>
</div><p>Get the value of <code>MetaMod</code>'s <code>Key</code> attribute.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_export_all-1">get_export_all/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_export_all(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; boolean()</code></pre></p>
<p> </p>
</div><p>Get the <code>export_all</code> value for <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_exports-1">get_exports/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_exports(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; <a href="#type-exports">exports()</a></code></pre></p>
<p> </p>
</div><p>Return the list of exports in the meta_mod.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_forms-1">get_forms/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_forms(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; <a href="#type-func_forms">func_forms()</a></code></pre></p>
<p> </p>
</div><p>Return the list of function forms in the meta_mod.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_func-3">get_func/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_func(MetaMod, Function, Arity) -&gt; <a href="#type-result">result</a>(<a href="#type-func_form">func_form()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a> | module()</code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li></ul></p>
<p> </p>
</div><p>Attempt to get the <code><a href="#type-func_form">func_form()</a></code> for <code>MetaMod</code>:<code>Function</code>/<code>Arity</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="get_module-1">get_module/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">get_module(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; module()</code></pre></p>
<p> </p>
</div><p>Return the module name for the meta_mod.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="has_func-3">has_func/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">has_func(MetaMod, Function, Arity) -&gt; boolean()</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li></ul></p>
<p> </p>
</div><p>Check whether <code>MetaMod</code> has a function <code>Function</code>/<code>Arity</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="new-1">new/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">new(Module :: module()) -&gt; <a href="#type-meta_mod">meta_mod()</a></code></pre></p>
<p> </p>
</div><p>Create a new meta_mod for a module with the given name.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="remove_export-3">remove_export/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">remove_export(MetaMod, Function, Arity) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Remove an export <code>{Function, Arity}</code>
  from the list of <code>exports</code> in <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="remove_func-3">remove_func/3</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">remove_func(MetaMod, Function, Arity) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = atom()</code></pre></li><li><pre><code class="language-erlang">Arity = arity()</code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Try to remove <code>Function</code> from <code>MetaMod</code>.
  If the function exists, return the new <code><a href="#type-meta_mod">meta_mod()</a></code>.
  Otherwise, return <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="rename-2">rename/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">rename(Form :: <a href="#type-func_form">func_form()</a>, NewName :: atom()) -&gt; <a href="#type-func_form">func_form()</a></code></pre></p>
<p> </p>
</div><p>Change the name of the function represented by <code>Form</code> to <code>NewName</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="replace_func-2">replace_func/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">replace_func(MetaMod, Function) -&gt; <a href="#type-result">result</a>(<a href="#type-meta_mod">meta_mod()</a>)</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Function = string() | <a href="#type-func_form">func_form()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Replace an existing function with a new one. If a matching function
  doesn't exist, add <code>Function</code> to <code>MetaMod</code>. This is tantamount to calling
  <a docgen-rel="seemfa" docgen-href="#remove_func/3" href="#remove_func-3"><code>remove_func/3</code></a> followed by <a docgen-rel="seemfa" docgen-href="#add_func/2" href="#add_func-2"><code>add_func/2</code></a>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="set_export_all-2">set_export_all/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">set_export_all(MetaMod, Value) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Value = boolean()</code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Set the <code>export_all</code> value for <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="set_exports-2">set_exports/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">set_exports(MetaMod, Exports) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Exports = <a href="#type-exports">exports()</a></code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Set the <code>MetaMod</code>'s export list to <code>Exports</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="set_forms-2">set_forms/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">set_forms(MetaMod, Forms) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Forms = <a href="#type-func_forms">func_forms()</a></code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="set_module-2">set_module/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">set_module(MetaMod, NewName) -&gt; NewMod</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">NewName = module()</code></pre></li><li><pre><code class="language-erlang">NewMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Set the meta_mod's module name.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="to_src-1">to_src/1</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">to_src(MetaMod :: <a href="#type-meta_mod">meta_mod()</a>) -&gt; Source :: string()</code></pre></p>
<p> </p>
</div><p>Return the pretty-printed source code for <code>MetaMod</code>.</p>

<h3 class="function"><a href="#index"><i class="arrow up"></i></a><a  class="function" name="to_src-2">to_src/2</a></h3>
<div class="spec">
<p><pre><code class="language-erlang">to_src(MetaMod, Filename) -&gt; <a href="#type-error_t">error_t</a>(term())</code></pre>
<ul class="definitions"><li><pre><code class="language-erlang">MetaMod = <a href="#type-meta_mod">meta_mod()</a></code></pre></li><li><pre><code class="language-erlang">Filename = <a href="http://www.erlang.org/doc/man/kernel/doc/file.html#type-filename">file:filename()</a></code></pre></li></ul></p>
<p> </p>
</div><p>Equivalent to <a href="file.html#write_file-2"><tt>file:write_file(Filename, to_src(MetaMod))</tt></a>.</p>

<hr>

</body>
</html>
